---
import { getCollection, type CollectionEntry } from "astro:content";
import { keyMap } from "../utils/keyMap";

const allDhpPosts = await getCollection("dhp");
const allMnPosts = await getCollection("mn");
const allItiPosts = await getCollection("iti");
const allSnPosts = await getCollection("sn");
const allSnpPosts = await getCollection("snp");
const allAnPosts = await getCollection("an");
const allUdPosts = await getCollection("ud");

const collections = [
	{ name: "dhp", count: allDhpPosts.length, suffix: "chapters" },
	{ name: "mn", count: allMnPosts.length, suffix: "discourses" },
	{ name: "snp", count: allSnpPosts.length, suffix: "poems" },
	{ name: "an", count: allAnPosts.length, suffix: "discourses" },
	{ name: "sn", count: allSnPosts.length, suffix: "discourses" },
	{ name: "iti", count: allItiPosts.length, suffix: "sayings" },
	{ name: "ud", count: allUdPosts.length, suffix: "inspired utterances" },
];
---

<table class="min-w-full border-collapse my-4">
	<thead class="bg-gray-100 dark:bg-gray-800">
		<tr>
			<th class="py-2 px-4 text-left border-b dark:border-gray-700"
				>Collection</th
			>
			<th class="py-2 px-4 text-left border-b dark:border-gray-700">Status</th>
		</tr>
	</thead>
	<tbody>
		{
			collections.map(({ name, count, suffix }) => (
				<tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
					<td class="py-2 px-4 border-b dark:border-gray-700">
						<a href={name}>{keyMap[name] || name}</a>
					</td>
					<td class="py-2 px-4 border-b dark:border-gray-700">
						{count} {suffix}
					</td>
				</tr>
			))
		}
	</tbody>
</table>
