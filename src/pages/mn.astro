---
import { getCollection, render, type CollectionEntry } from "astro:content";
import Layout from "../layouts/Layout.astro";
import PostCard from "../components/PostCard.astro";

const allMnPosts = await getCollection("mn");

// Natural sort function
const naturalSort = (a: CollectionEntry<"mn">, b: CollectionEntry<"mn">) => {
	return a.id.localeCompare(b.id, undefined, {
		numeric: true,
		sensitivity: "base",
	});
};

const sortedPosts = allMnPosts.sort(naturalSort);
---

<Layout title="Middle Length Discourses">
	<main class="container">
		<div class="posts-grid">
			{
				sortedPosts.map((post: (typeof sortedPosts)[0]) => (
					<PostCard
						title={post.data.title}
						description={post.data.description}
						id={post.data.slug}
					/>
				))
			}
		</div>
	</main>
</Layout>
