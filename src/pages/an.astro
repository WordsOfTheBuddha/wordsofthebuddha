---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../layouts/Layout.astro";
import PostCard from "../components/PostCard.astro";

const allAnPosts = await getCollection("an");

// Natural sort function
const naturalSort = (a: CollectionEntry<"an">, b: CollectionEntry<"an">) => {
	return a.id.localeCompare(b.id, undefined, {
		numeric: true,
		sensitivity: "base",
	});
};

const sortedPosts = allAnPosts.sort(naturalSort);
---

<Layout title="Numerical Discourses">
	<main class="container">
		<div class="posts-grid">
			{
				sortedPosts.map((post: (typeof sortedPosts)[0]) => (
					<PostCard
						title={post.data.title}
						description={post.data.description}
						id={post.data.slug}
					/>
				))
			}
		</div>
	</main>
</Layout>
